{% load static %}
<html>
  <head>
	<meta charset="UTF-8">
	
    <title>SA3 QA Website Answers</title>
    <script src="{% static 'js/Markdown.Converter.min.js' %}"></script>
    <script src="{% static 'js/Markdown.Editor.min.js' %}"></script>
    <script src="{% static 'js/Markdown.Sanitizer.min.js'%}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="{% static 'js/base.js'%}"></script>
    
    <link rel="stylesheet" href="{% static 'css/pagedown.css' %}" />
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />

    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/one-page-wonder.min.css' %}" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{% static 'css/one-page-wonder.min.css' %}" rel="stylesheet">

    <style>
      .wmd-button > span {
        background-image: url("{% static 'img/wmd-buttons.svg' %}");
        background-repeat: no-repeat;
        background-position: 0px 0px;
        width: 20px;
        height: 20px;
        display: inline-block;
      }
      #wmd-input {
        padding: 10px;
        background-color: white;
        max-width: 660px;
        min-width: 660px;
      }
      .wmd-spacer {
        background-color: white;
        width: 0;
      }
      #wmd-button-bar {
        height: 44px;
        padding: 0 12px;
        width: 660px;
        border: 1px solid #c8ccd0;
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
  <header class="masthead text-center text white">
    <div align="center" style="vertical-align:bottom" class="masthead-content">
     <div class="container">
  <!-- Display the question's data -->
  <div id="question">
      <h1>{{ currentQuestion.title }}</h1>
      <p>{{ currentQuestion.content }}</p>
      <h2>Question by {{ currentQuestion.owner }} on {{ currentQuestion.creation_date }}</h2>
      <hr>
      <!-- JQuery from BootstrapCDN -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

    <!-- Popper.js from BootstrapCDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  </div>
  <div id="answers">
  <!-- Display the answers -->
  {% if bestAnswer %}
      <form id="deselect_form" method="post">
          {% csrf_token %}
          {% if user == currentQuestion.owner %}
              <h3 class="good_answer">You have selected this as the best answer!</h3>
          {% else %}
              <h3 class="good_answer">{{currentQuestion.owner}} has selected this as the best answer!</h3>
          {% endif %}
          <p>{{ bestAnswer.content }}</p>
          <!--Allow one to deselect the best answer if user is logged in and is the user who asked the question-->
          {% if user.is_authenticated and user == currentQuestion.owner %}
              <input type = "submit" name="deselect", value="Deselect as Best Answer"></button>
          {% endif %}
          <h4>Answer by {{ bestAnswer.owner }} on {{ bestAnswer.creation_date }}</h4>
          <hr>
      </form>
      <h3>Other answers:</h3>
  {% endif %}
  {% for answer in answers %}
      <form id="select{{ answer.id }}_form" method="post">
          {% csrf_token %}
          <p>{{ answer.content }}</p>
          <!--Allow one to select best answers if user is logged in, is the user who asked the question and a best answer doesn't exist already-->
          {% if user.is_authenticated and user == currentQuestion.owner and not bestAnswer %} 
             <input type = "submit" name="select_{{ answer.id }}" value="Select as Best Answer"></input>
          {% endif %}
          <h4>Answer by {{ answer.owner }} on {{ answer.creation_date }}</h4>
          <hr>
      </form>
  {% empty %}
    <h3>Be the first to answer this question!</h3>
  {% endfor %}
  </div>
  <!-- Display the answering form for logged in users -->
  {% if user.is_authenticated %}
    <form id="answer_form" method="post">
        {% csrf_token %}
        <div id="wmd-button-bar"></div>
        <textarea id="wmd-input" name="content" class="wmd-input"></textarea>
        <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
        <input type="submit" name="answer_form" value="Submit your answer"/>
    </form>
  {% else %}
   <p>To answer this question, <a href="/login">login</a> or <a href="/signup">sign up</a>!</p>
  {% endif %}
</div>
</div>
<div align="center" style="vertical-align:bottom">
      <div class="bg-circle-1 bg-circle"></div>
      <div class="bg-circle-2 bg-circle"></div>
      <div class="bg-circle-3 bg-circle"></div>
      <div class="bg-circle-4 bg-circle"></div>
  </body>
</html>